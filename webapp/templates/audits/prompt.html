{% load i18n markdown_filters %}

<turbo-frame id="prompts_frame">
    <div class="mt-6">

        {% if prompt %}
            {% for message in prompt.prompt.messages %}
                {% if message.role == "user" %}
                    <div class="flex justify-end">
                        <div class="bg-blue-600 text-white rounded-lg px-4 py-2 max-w-2xl">
                            <div class="whitespace-pre-wrap">{{ message.content }}</div>
                        </div>
                    </div>
                {% endif %}
                {% if message.role == "assistant" %}
                    <div class="flex justify-start">
                        <div class="bg-white border border-gray-200 text-gray-800 rounded-lg px-4 py-2 max-w-2xl">
                            <div class="prose prose-sm max-w-none">{{ message.content|markdown }}</div>
                        </div>
                    </div>
                {% endif %}
            {% endfor %}
            <div hidden>
                {{ prompt.prompt }}
            </div>

        {% else %}
            <div class="space-y-4 mb-4 min-h-[200px] max-h-[600px] overflow-y-auto border border-gray-200 rounded-lg p-4 bg-gray-50" >
                <div class="text-gray-500 text-center py-8">
                    {% translate "No messages yet. Start a conversation by asking a question below." %}
                </div>
            </div>
        {% endif %}
        {% include "audits/components/prompt_form.html" %}

    </div>
</turbo-frame>
