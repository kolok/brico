{% load i18n %}

{% if user_organizations %}
    <div class="relative" data-controller="dropdown">
        <button type="button"
                class="btn btn-secondary"
                data-dropdown-target="toggle"
                data-action="click->dropdown#toggle"
                aria-expanded="false"
                aria-haspopup="true">
            {% if current_organization %}
                {{ current_organization.1 }}
            {% else %}
                {% translate "Select Organization" %}
            {% endif %}
            <span class="ml-2">▼</span>
        </button>
        <div class="hidden absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 z-50"
            data-dropdown-target="menu">
            <div class="py-1" role="menu" aria-orientation="vertical">
                {% for org in user_organizations %}
                    <a href="{% url 'organization:switch' organization_id=org.0 %}"
                    class="block px-4 py-2 text-sm {% if current_organization and current_organization.0 == org.0 %}bg-gray-100 font-semibold{% else %}text-gray-700 hover:bg-gray-50{% endif %}"
                    role="menuitem">
                        {{ org.1 }}
                        {% if current_organization and current_organization.0 == org.0 %}
                            <span class="ml-2">✓</span>
                        {% endif %}
                    </a>
                {% endfor %}
                <div class="border-t border-gray-200 my-1"></div>
                <a href="{% url 'organization:create' %}"
                class="block px-4 py-2 text-sm text-primary hover:bg-gray-50"
                role="menuitem">
                    + {% translate "Create Organization" %}
                </a>
            </div>
        </div>
    </div>
{% endif %}
